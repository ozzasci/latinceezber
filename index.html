
<!DOCTYPE html>
<html lang="tr">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEX ROMANA</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cinzel', serif;
            text-align: center;
            background-color: #f8f1e9;
            padding: 20px;
            transition: background-color 0.3s, color 0.3s;
            margin: 0;
        }
        body.dark {
            background-color: #4a3f35;
            color: #fff;
        }
        #registerOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        #registerForm {
            background: linear-gradient(135deg, #fff, #f0f0f0);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            width: 320px;
            text-align: center;
        }
        .dark #registerForm {
            background: linear-gradient(135deg, #4a3f35, #6b5e48);
        }
        #registerForm input, #registerForm button {
            margin: 12px 0;
            padding: 10px;
            width: 100%;
            border: 1px solid #d4a017;
            border-radius: 8px;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        #registerForm button {
            background-color: #8b0000;
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }
        #registerForm button:hover {
            background-color: #a11212;
            transform: translateY(-2px);
        }
        #mainContent {
            display: none;
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        h1 {
            font-family: 'Cinzel', serif;
            font-size: 48px;
            color: #d4a017;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        .dark h1 {
            color: #b8860b;
        }
        .card {
            background: linear-gradient(135deg, #f8f1e9, #e0d8c3);
            width: 340px;
            margin: 20px auto;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
            border: 1px solid #d4a017;
            cursor: pointer;
            transform: scale(0.95);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease, box-shadow 0.3s ease;
        }
        .card.visible {
            transform: scale(1);
            opacity: 1;
            animation: fadeIn 0.5s ease-in-out;
        }
        .card:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 24px rgba(0,0,0,0.25);
        }
        .dark .card {
            background: linear-gradient(135deg, #4a3f35, #6b5e48);
            border-color: #b8860b;
        }
        .card h2 {
            font-size: 28px;
            margin-bottom: 15px;
            color: #8b0000;
        }
        #meaning {
            display: none;
            color: #2E7D32;
            font-style: italic;
            font-size: 16px;
            line-height: 1.5;
        }
        #history {
            display: none;
            font-size: 14px;
            color: #888;
            margin-top: 10px;
        }
        .dropdown {
            margin: 15px auto;
            max-width: 600px;
            position: relative;
            display: inline-block;
        }
        .dropdown-toggle {
            padding: 12px 20px;
            background-color: #8b0000;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            width: 220px;
            text-align: left;
            font-family: 'Cinzel', serif;
        }
        .dropdown-toggle:hover {
            background-color: #a11212;
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
            transform: translateY(-2px);
        }
        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background-color: #fff;
            border: none;
            border-radius: 8px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            width: 220px;
            padding: 10px 0;
            z-index: 1000;
            animation: slideDown 0.3s ease;
        }
        .dark .dropdown-menu {
            background-color: #4a3f35;
        }
        .dropdown-menu button {
            display: block;
            width: 100%;
            padding: 12px 20px;
            background-color: transparent;
            color: #333;
            border: none;
            text-align: left;
            font-family: Arial, sans-serif;
            transition: background-color 0.2s;
        }
        .dark .dropdown-menu button {
            color: #fff;
        }
        .dropdown-menu button:hover {
            background-color: #f8f1e9;
            color: #8b0000;
        }
        .dark .dropdown-menu button:hover {
            background-color: #6b5e48;
        }
        #resetButton {
            background-color: #f44336;
            color: white;
        }
        #resetButton:hover {
            background-color: #d32f2f;
        }
        #progress, #quizSection, #stats, #reviewSection, #leaderboardSection {
            margin-top: 30px;
            font-size: 18px;
        }
        #quizSection, #stats, #reviewSection, #leaderboardSection {
            display: none;
        }
        #quizSection {
            padding: 20px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .dark #quizSection {
            background: #4a3f35;
        }
        #quizSection.correct {
            border: 3px solid #4CAF50;
            animation: pulse 0.5s ease;
        }
        #quizSection.wrong {
            border: 3px solid #f44336;
            animation: pulse 0.5s ease;
        }
        #timer {
            color: #f44336;
            font-weight: bold;
        }
        #badges {
            margin-top: 20px;
            color: #d4a017;
        }
        input[type="time"] {
            padding: 8px;
            margin: 10px;
            border-radius: 8px;
            border: 1px solid #d4a017;
            font-family: Arial, sans-serif;
        }
        #searchContainer {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 1000;
        }
        #search {
            padding: 10px;
            width: 220px;
            border: 1px solid #d4a017;
            border-radius: 8px;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        .category-buttons {
            margin: 30px auto;
            max-width: 600px;
        }
        .category-btn {
            padding: 12px 20px;
            margin: 8px;
            background-color: #d4a017;
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            font-family: 'Cinzel', serif;
        }
        .category-btn:hover {
            background-color: #b8860b;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }
        .dark .category-btn {
            background-color: #b8860b;
        }
        .dark .category-btn:hover {
            background-color: #8b6f47;
        }
        .quiz-options button {
            display: block;
            width: 220px;
            margin: 10px auto;
            padding: 12px;
            background-color: #8b0000;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            font-family: 'Cinzel', serif;
        }
        .quiz-options button:hover {
            background-color: #a11212;
            transform: scale(1.05);
        }
        #reviewList button {
            margin: 8px;
            padding: 10px 20px;
            background-color: #d4a017;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Cinzel', serif;
        }
        #reviewList button:hover {
            background-color: #b8860b;
        }
        .progress-bar {
            width: 340px;
            height: 20px;
            background-color: #ddd;
            border-radius: 10px;
            margin: 15px auto;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: #8b0000;
            transition: width 0.5s ease;
        }
        #analogClock {
            background: radial-gradient(circle, #fff, #e0e0e0);
            border: 3px solid #d4a017;
            border-radius: 50%;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            position: absolute;
            top: 10px;
            right: 10px;
            width: 150px;
            height: 150px;
            transition: background 0.3s;
            z-index: 1000;
        }
        .dark #analogClock {
            background: radial-gradient(circle, #6b5e48, #4a3f35);
            border-color: #b8860b;
        }
        .clock-face {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        .hour-hand, .minute-hand, .second-hand {
            position: absolute;
            bottom: 50%;
            left: 50%;
            transform-origin: bottom;
            background: #333;
            border-radius: 2px;
            transition: transform 0.1s ease;
        }
        .hour-hand {
            width: 5px;
            height: 45px;
            background: #8b0000;
        }
        .minute-hand {
            width: 3px;
            height: 60px;
            background: #d4a017;
        }
        .second-hand {
            width: 1px;
            height: 70px;
            background: #f44336;
        }
        .clock-center {
            width: 8px;
            height: 8px;
            background: #333;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        #userName {
            font-size: 18px;
            color: #8b0000;
            margin: 15px 0;
        }
        .dark #userName {
            color: #d4a017;
        }
        #chatSection {
            margin: 30px auto;
            max-width: 600px;
            background: linear-gradient(135deg, #fff, #f0f0f0);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .dark #chatSection {
            background: linear-gradient(135deg, #4a3f35, #6b5e48);
        }
        #chatMessages {
            height: 200px;
            overflow-y: auto;
            border: 1px solid #d4a017;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            text-align: left;
            font-family: Arial, sans-serif;
        }
        #chatInput {
            width: 70%;
            padding: 10px;
            border: 1px solid #d4a017;
            border-radius: 8px;
            font-family: Arial, sans-serif;
        }
        #sendMessage {
            padding: 10px 20px;
            background-color: #8b0000;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            font-family: 'Cinzel', serif;
        }
        #sendMessage:hover {
            background-color: #a11212;
            transform: translateY(-2px);
        }
        #leaderboardSection {
            padding: 20px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            max-width: 600px;
            margin: 30px auto;
        }
        .dark #leaderboardSection {
            background: #4a3f35;
        }
        #leaderboardList {
            list-style: none;
            padding: 0;
            text-align: left;
        }
        #leaderboardList li {
            padding: 10px;
            border-bottom: 1px solid #d4a017;
            font-family: Arial, sans-serif;
        }
        #leaderboardList li:last-child {
            border-bottom: none;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        @media (max-width: 600px) {
            #mainContent {
                padding: 20px 10px;
            }
            .dropdown-toggle, .dropdown-menu {
                width: 100%;
            }
            .card {
                width: 100%;
            }
            .category-btn i {
                margin-right: 8px;
                font-size: 18px;
            }
            .progress-bar {
                width: 100%;
            }
            #analogClock {
                width: 100px;
                height: 100px;
                top: 5px;
                right: 5px;
            }
            .hour-hand { height: 30px; }
            .minute-hand { height: 40px; }
            .second-hand { height: 50px; }
            .clock-center { width: 6px; height: 6px; }
            #chatSection { width: 100%; }
            #chatInput { width: 60%; }
            #searchContainer { top: 5px; left: 5px; }
            #search { width: 150px; }
            .quiz-options button { width: 100%; }
        }
    </style>
</head>
<body class="light">
    <!-- Kayıt overlay -->
    <div id="registerOverlay">
        <form id="registerForm">
            <h2>Kayıt Ol</h2>
            <input type="text" id="name" placeholder="İsim" required>
            <input type="email" id="email" placeholder="E-posta" required>
            <button type="submit">Kayıt Ol</button>
        </form>
    </div>

    <!-- Ana içerik -->
    <div id="mainContent">
        <h1>LEX ROMANA</h1>
        <div id="analogClock"></div>
        <p id="userName"></p>
        <div id="searchContainer">
            <input type="text" id="search" placeholder="Kelime ara" onkeyup="searchWord()">
        </div>
        <div class="card" id="card" onclick="toggleMeaning()">
            <h2 id="word">Imperium</h2>
            <p id="meaning">Güç, otorite</p>
            <p id="history" style="display: none;">Roma'da siyasi otorite ve komuta gücünü ifade eder.</p>
            <img id="wordImage" src="" alt="" style="max-width: 100%; display: none;">
        </div>
        <div class="dropdown">
            <button class="dropdown-toggle" onclick="toggleDropdown('kelime-kontrolu')">Kelime Kontrolü</button>
            <div class="dropdown-menu" id="kelime-kontrolu">
                <button onclick="nextWord()">Sonraki Kelime</button>
                <button onclick="markAsLearned()">Öğrenildi</button>
                <button onclick="speakWord()">Dinle</button>
            </div>
        </div>
        <div class="dropdown">
            <button class="dropdown-toggle" onclick="toggleDropdown('ayarlar')">Ayarlar</button>
            <div class="dropdown-menu" id="ayarlar">
                <button onclick="setReminder()">Hatırlatma Ayarla (5 sn)</button>
                <button onclick="setCustomReminder()">Zamanı Ayarla</button>
                <button onclick="setDailyGoal()">Günlük Hedef Belirle</button>
                <button onclick="checkDailyGoal()">Hedefi Kontrol Et</button>
            </div>
        </div>
        <div class="dropdown">
            <button class="dropdown-toggle" onclick="toggleDropdown('test-istatistik')">Test ve İstatistik</button>
            <div class="dropdown-menu" id="test-istatistik">
                <button onclick="startQuiz(true)">Çoktan Seçmeli Test</button>
                <button onclick="startQuiz(false)">Yazılı Test</button>
                <button onclick="startReviewQuiz()">Tekrar Testi</button>
                <button onclick="startMultiplayerQuiz()">Çok Oyunculu Test</button>
                <button onclick="showLeaderboard()">Liderlik Tablosu</button>
                <button onclick="showDetailedStats()">Detaylı İstatistikler</button>
                <button onclick="calculateDifficulty()">Zor Kelimeleri Bul</button>
                <button onclick="exportWrongWordsToPDF()">Yanlışları PDF Olarak İndir</button>
                <button onclick="exportWrongWordsToWord()">Yanlışları Word Olarak İndir</button>
            </div>
        </div>
        <div class="dropdown">
            <button class="dropdown-toggle" onclick="toggleDropdown('diger')">Diğer</button>
            <div class="dropdown-menu" id="diger">
                <button onclick="addNewWord()">Yeni Kelime Ekle</button>
                <button id="resetButton" onclick="resetProgress()">İlerlemeyi Sıfırla</button>
                <button onclick="toggleTheme()">Tema Değiştir</button>
                <button onclick="showReviewSection()">Tekrar Listesini Göster</button>
            </div>
        </div>
        <div id="score">Puan: 0</div>
        <div id="level">Seviye: Çırak</div>
        <p id="reminderStatus"></p>
        <div class="category-buttons">
            <h3>Kategori Seç</h3>
            <button class="category-btn" onclick="filterByCategory('Hepsi')"><i class="fas fa-globe"></i> Hepsi</button>
            <button class="category-btn" onclick="filterByCategory('Siyasi')"><i class="fas fa-crown"></i> Siyasi</button>
            <button class="category-btn" onclick="filterByCategory('Askeri')"><i class="fas fa-sword"></i> Askeri</button>
            <button class="category-btn" onclick="filterByCategory('Günlük Yaşam')"><i class="fas fa-home"></i> Günlük Yaşam</button>
        </div>
        <div>
            <h3>Zamanlanmış Hatırlatma</h3>
            <input type="time" id="reminderTime">
            <button onclick="setCustomReminder()">Zamanı Ayarla</button>
            <p id="customReminderStatus"></p>
        </div>
        <div id="chatSection">
            <h3>Sohbet Odası</h3>
            <div id="chatMessages"></div>
            <input type="text" id="chatInput" placeholder="Mesajınızı yazın...">
            <button id="sendMessage" onclick="sendChatMessage()">Gönder</button>
        </div>
        <div id="progress">
            Öğrenilen Kelimeler: <span id="learnedCount">0</span> / <span id="totalCount">0</span>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
            </div>
        </div>
        <div id="reviewSection">
            <h3>Bugün Tekrar Edilecekler</h3>
            <div id="reviewList"></div>
            <button onclick="hideReviewSection()">Kapat</button>
        </div>
        <div id="quizSection">
            <h3 id="quizTitle">Test Modu</h3>
            <p id="quizWord"></p>
            <p>Kalan Süre: <span id="timer">60</span> sn</p>
            <input type="text" id="userAnswer" placeholder="Anlamı yazın">
            <div id="quizOptions" class="quiz-options"></div>
            <button id="checkButton" onclick="checkAnswer()">Kontrol Et</button>
            <button onclick="endQuiz()">Testi Bitir</button>
            <p id="result"></p>
            <p>Doğru: <span id="correctCount">0</span> | Yanlış: <span id="wrongCount">0</span></p>
        </div>
        <div id="stats">
            <h3>İstatistikler</h3>
            <p>En Çok Yanlış Yapılan Kelime: <span id="mostWrong"></span></p>
            <button onclick="closeStats()">Kapat</button>
        </div>
        <div id="leaderboardSection">
            <h3>Liderlik Tablosu</h3>
            <ul id="leaderboardList"></ul>
            <button onclick="hideLeaderboard()">Kapat</button>
        </div>
        <button onclick="showStats()">İstatistikleri Göster</button>
        <div id="badges">
            Rozetler: <span id="badgeList">Henüz rozet yok</span>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-firestore.js"></script>
    <!-- jsPDF Kütüphanesi -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script>
        // Firebase yapılandırmasını buraya senin Firebase Console'dan aldığın bilgilerle güncelle!
       const firebaseConfig = {
  apiKey: "AIzaSyDjsTHNu_lDxK16_svP7A2tEVVQD26DKWc",
  authDomain: "lexromana-7153b.firebaseapp.com",
  projectId: "lexromana-7153b",
  storageBucket: "lexromana-7153b.firebasestorage.app",
  messagingSenderId: "670928361594",
  appId: "1:670928361594:web:1e6933013e70e05d4243c3"
};

      let db;
        function initializeFirebase() {
            if (typeof firebase === 'undefined') {
                console.error("Firebase SDK yüklenemedi. İnternet bağlantınızı kontrol edin veya yerel sunucu kullandığınızdan emin olun.");
                return;
            }
            try {
                firebase.initializeApp(firebaseConfig);
                db = firebase.firestore();
                console.log("Firebase başarıyla başlatıldı.");
            } catch (error) {
                console.warn("Firebase başlatılamadı, yerel modda devam ediliyor:", error);
            }
        }
window.addEventListener('load', function() {
            initializeFirebase();
            if (localStorage.getItem('registered') === 'true') {
                showMainContent();
            }
        });
        const { jsPDF } = window.jspdf;

        function showMainContent() {
            console.log("showMainContent çağrıldı");
            document.getElementById('registerOverlay').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            displayUserName();
            try {
                loadChatMessages();
            } catch (error) {
                console.error("loadChatMessages hatası:", error);
            }
        }

        window.onload = function() {
            if (localStorage.getItem('registered') === 'true') {
                showMainContent();
            }
            const savedWords = JSON.parse(localStorage.getItem("learnedWords")) || [];
            if (savedWords.length > 0) {
                words.forEach((word, index) => {
                    if (savedWords[index]) {
                        word.learned = savedWords[index].learned;
                        word.wrongAttempts = savedWords[index].wrongAttempts || 0;
                        word.correctAttempts = savedWords[index].correctAttempts || 0;
                        word.learnedDate = savedWords[index].learnedDate || null;
                        word.nextReviewDate = savedWords[index].nextReviewDate || null;
                        word.leitnerBox = savedWords[index].leitnerBox || 0;
                    }
                });
            }
            updateProgress();
            updateBadges();
            displayWord();
            createAnalogClock();
        };

        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Lütfen geçerli bir e-posta adresi girin!');
                return;
            }

            localStorage.setItem('registered', 'true');
            localStorage.setItem('userName', name);

            if (db) {
                db.collection('users').add({
                    name: name,
                    email: email,
                    score: 0,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                })
                .then(() => {
                    console.log('Kayıt Firebase’e başarıyla eklendi');
                    showMainContent();
                    alert('Kayıt başarılı! Hoş geldiniz!');
                })
                .catch((error) => {
                    console.error('Firebase kayıt hatası:', error);
                    showMainContent();
                    alert('Kayıt yerel olarak tamamlandı, ancak Firebase’e bağlanılamadı: ' + error.message);
                });
            } else {
                console.warn('Firebase bağlantısı yok, yerel modda devam ediliyor.');
                showMainContent();
                alert('Kayıt başarılı! Hoş geldiniz! (Yerel mod)');
            }
        });

        const words = [
            { latin: "Imperium", meaning: "Güç, otorite", history: "Roma'da siyasi otorite ve komuta gücünü ifade eder.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, leitnerBox: 0 },
            { latin: "Legio", meaning: "Lejyon", history: "Roma ordusunun temel birimi, yaklaşık 5.000 askerden oluşurdu.", learned: false, category: "Askeri", wrongAttempts: 0, correctAttempts: 0, image: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Roman_legionary.jpg/320px-Roman_legionary.jpg", learnedDate: null, nextReviewDate: null, leitnerBox: 0 },
            { latin: "Monumentum", meaning: "Anıt", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8e/Arch_of_Constantine.jpg/320px-Arch_of_Constantine.jpg", learnedDate: null, nextReviewDate: null, leitnerBox: 0 },
 { latin: "Caesar", meaning: "Sezar, imparator", history: "Roma'da Julius Caesar'dan sonra imparatorlara verilen unvan, otorite ve liderlik sembolüydü.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Augustus", meaning: "Yüce, ilk imparator unvanı", history: "Roma'nın ilk imparatoru Octavianus'a verilen unvan, Pax Romana'nın başlangıcını simgeler.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Senatus", meaning: "Senato", history: "Roma Cumhuriyeti'nde yasama ve yönetim organı, genellikle aristokratlardan oluşurdu.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Consul", meaning: "Konsül", history: "Roma Cumhuriyeti'nde en yüksek iki yönetici, bir yıl görev yapar ve orduyu komuta ederdi.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Praetor", meaning: "Yargıç, yönetici", history: "Roma'da adalet dağıtımı ve eyalet yönetimi gibi görevleri olan üst düzey memurlar.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Censor", meaning: "Sansürcü, nüfus sayımı görevlisi", history: "Roma'da nüfus sayımı yapar, ahlaki denetim sağlar ve senatör listesini düzenlerdi.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Legatus", meaning: "Elçi, komutan", history: "Roma'da imparator adına eyaletleri yöneten veya lejyonları komuta eden yetkili.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Tribunus", meaning: "Tribun, halk temsilcisi", history: "Pleblerin haklarını koruyan memurlar, senatoya karşı veto yetkisine sahipti.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Princeps", meaning: "İlk vatandaş, imparator unvanı", history: "Augustus tarafından kullanılan unvan, imparatorun halkın lideri olduğunu vurgular.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Pax", meaning: "Barış (örn. Pax Romana)", history: "Roma'da Augustus döneminde başlayan uzun süreli barış dönemi, Pax Romana olarak bilinir.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Legio", meaning: "Lejyon", history: "Roma ordusunun temel birimi, yaklaşık 5.000 askerden oluşur ve disiplinleriyle ünlüydü.", learned: false, category: "Askeri", wrongAttempts: 0, correctAttempts: 0, image: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Roman_legionary.jpg/320px-Roman_legionary.jpg", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Centurio", meaning: "Yüzbaşı", history: "Roma lejyonlarında bir centuria (yaklaşık 100 asker) komutanı, cesaretiyle tanınırdı.", learned: false, category: "Askeri", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Miles", meaning: "Asker", history: "Roma ordusundaki sıradan askerlere verilen isim, lejyonların temel taşıydı.", learned: false, category: "Askeri", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Gladius", meaning: "Kısa kılıç", history: "Roma lejyonerlerinin kullandığı kısa, çift ağızlı kılıç, yakın dövüşte etkiliydi.", learned: false, category: "Askeri", wrongAttempts: 0, correctAttempts: 0, image: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Gladius_%281%29.jpg/320px-Gladius_%281%29.jpg", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Scutum", meaning: "Kalkan", history: "Roma lejyonerlerinin kullandığı büyük, dikdörtgen kalkan, savunma için idealdi.", learned: false, category: "Askeri", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Pilum", meaning: "Mızrak", history: "Roma askerlerinin fırlattığı ağır mızrak, düşman kalkanlarını delmek için tasarlandı.", learned: false, category: "Askeri", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Lorica", meaning: "Zırh", history: "Roma askerlerinin giydiği metal veya deri zırh, 'lorica segmentata' türüyle ünlüydü.", learned: false, category: "Askeri", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Castrum", meaning: "Askeri kamp", history: "Roma lejyonlarının geçici veya kalıcı üsleri, stratejik olarak tasarlanırdı.", learned: false, category: "Askeri", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Aquila", meaning: "Kartal (lejyon sembolü)", history: "Roma lejyonlarının kutsal sancağı, birliğin onurunu temsil ederdi.", learned: false, category: "Askeri", wrongAttempts: 0, correctAttempts: 0, image: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Roman_Aquila.png/320px-Roman_Aquila.png", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Limes", meaning: "Sınır, savunma hattı", history: "Roma İmparatorluğu'nun sınırlarını koruyan tahkimatlar, örneğin Germania'daki limes.", learned: false, category: "Askeri", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Provincia", meaning: "Eyalet", history: "Roma İmparatorluğu'nun fethedilen toprakları, valiler tarafından yönetilirdi.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Gubernator", meaning: "Vali", history: "Roma'da eyaletleri yöneten yetkili, genellikle askeri ve sivil otoriteye sahipti.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Colonia", meaning: "Koloni, yerleşim", history: "Roma'da askerler ve vatandaşlar için kurulan yeni yerleşim birimleri, örneğin Colonia Agrippina.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Forum", meaning: "Meydan, pazar yeri", history: "Roma şehirlerinde halkın toplandığı, ticaret ve siyasetin merkezi olan açık alan.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Forum_Romanum_%281%29.jpg/320px-Forum_Romanum_%281%29.jpg", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Basilica", meaning: "Adliye binası", history: "Roma'da mahkemelerin ve ticari toplantıların yapıldığı büyük çatılı yapılar.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Thermae", meaning: "Hamamlar", history: "Roma'da sosyal ve hijyenik merkezler, sıcak ve soğuk banyolar içerirdi.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Aquaeductus", meaning: "Su kemeri", history: "Roma'da şehirlere su taşıyan devasa yapılar, mühendislik harikasıydı.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6e/Aqueduct_of_Lisbon_%281%29.jpg/320px-Aqueduct_of_Lisbon_%281%29.jpg", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Via", meaning: "Yol", history: "Roma'da imparatorluğu bağlayan taş döşeli yollar, örneğin Via Appia.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Pomerium", meaning: "Şehir sınırı", history: "Roma'da kutsal şehir sınırı, burası içinde silah taşınması yasaktı.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Urbs", meaning: "Şehir (özellikle Roma)", history: "Roma'da genellikle Roma şehrini ifade eder, 'Urbs Roma' olarak bilinirdi.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Civis", meaning: "Vatandaş", history: "Roma'da yasal haklara sahip kişi, vatandaşlık önemli bir ayrıcalıktı.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Plebs", meaning: "Halk, alt sınıf", history: "Roma'da alt sınıf vatandaşlar, siyasi haklar için sıkça mücadele ettiler.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Patricius", meaning: "Soylu, patrici", history: "Roma'da soylu ailelerden gelen üst sınıf vatandaşlar, senatoyu domine ederdi.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Eques", meaning: "Süvari, şövalye sınıfı", history: "Roma'da atlı askerler ve zengin tüccar sınıfı, toplumsal statü sembolüydü.", learned: false, category: "Askeri", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Senatus Populusque Romanus", meaning: "Roma Senatosu ve Halkı (SPQR)", history: "Roma'nın resmi sloganı, senato ve halkın birliğini temsil ederdi.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Toga", meaning: "Resmi giysi", history: "Roma vatandaşlarının giydiği resmi kıyafet, statü ve vatandaşlık göstergesiydi.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Toga_picta.jpg/320px-Toga_picta.jpg", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Stola", meaning: "Kadın elbisesi", history: "Roma'da evli kadınların giydiği uzun elbise, iffet ve statü sembolüydü.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Palla", meaning: "Kadın şalı", history: "Roma'da kadınların baş ve omuzlarını örttüğü şal, genellikle stola ile giyilirdi.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Tunica", meaning: "Gündelik giysi", history: "Roma'da herkesin giydiği basit, kısa kollu gömlek, günlük kullanım için yaygındı.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Domus", meaning: "Ev, konut", history: "Roma'da zengin ailelerin yaşadığı geniş konutlar, genellikle bir atrium içerirdi.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Villa", meaning: "Kır evi", history: "Roma'da zenginlerin şehir dışında dinlenmek için kullandığı lüks konutlar.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Atrium", meaning: "Evin merkezi salonu", history: "Roma evlerinde açık iç avlu, yağmur suyu toplamak için kullanılırdı.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Tablinum", meaning: "Çalışma odası", history: "Roma evlerinde aile reisinin işlerini yürüttüğü oda, genellikle atriumun yanındaydı.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Peristylum", meaning: "Bahçeli avlu", history: "Roma evlerinde sütunlarla çevrili açık bahçe, dinlenme alanı olarak kullanılırdı.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Familia", meaning: "Aile, hane", history: "Roma'da ev halkını ve köleleri kapsayan geniş bir kavramdı.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Paterfamilias", meaning: "Aile reisi", history: "Roma'da aile üzerinde tam yetkiye sahip erkek, yasal otoriteydi.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Mater", meaning: "Anne", history: "Roma'da ailede önemli bir rol oynayan kadın, çocuk yetiştirirdi.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Filius", meaning: "Oğul", history: "Roma'da aile reisinin mirasçısı, genellikle babasına bağlıydı.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Filia", meaning: "Kız", history: "Roma'da babasının otoritesi altındaki kız çocuğu, genellikle evlilikle aileden ayrılırdı.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Servus", meaning: "Köle", history: "Roma'da ev işlerinden tarıma kadar her alanda çalışan esirler.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Libertus", meaning: "Azat edilmiş köle", history: "Roma'da özgürlüğüne kavuşmuş köle, eski sahibine bağlılık borçluydu.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Cliens", meaning: "Bağımlı, müşteri", history: "Roma'da patronuna bağlı olan kişi, koruma ve yardım karşılığı hizmet sunardı.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Patronus", meaning: "Koruyucu, patron", history: "Roma'da client'larına destek veren soylu, toplumsal bağların temelindeydi.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Lex", meaning: "Yasa", history: "Roma'da halk meclisleri tarafından kabul edilen kanunlar.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Ius", meaning: "Hak, hukuk", history: "Roma'da vatandaşların sahip olduğu yasal haklar ve hukuk sistemi.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Curia", meaning: "Senato binası", history: "Roma'da senato toplantılarının yapıldığı bina ve meclis anlamında kullanılırdı.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Comitium", meaning: "Halk meclisi alanı", history: "Roma'da halk meclislerinin toplandığı açık alan, Forum'un bir parçasıydı.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Rostra", meaning: "Kürsü", history: "Roma Forumu'nda halka hitap edilen platform, savaş ganimetleriyle süslenirdi.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Triumphus", meaning: "Zafer alayı", history: "Roma'da generallerin zaferlerini kutlamak için düzenlenen görkemli geçit töreni.", learned: false, category: "Askeri", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Ovatio", meaning: "Küçük zafer kutlaması", history: "Roma'da triumphus kadar büyük olmayan, daha mütevazı bir zafer töreni.", learned: false, category: "Askeri", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Lictor", meaning: "Memur, koruma", history: "Roma'da üst düzey yöneticilere eşlik eden ve otorite sembolü taşıyan görevliler.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Fasces", meaning: "Otorite sembolü (balta ve çubuklar)", history: "Roma'da lictorların taşıdığı, güç ve cezalandırma yetkisini temsil eden demet.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Dictator", meaning: "Diktatör (geçici lider)", history: "Roma'da kriz zamanlarında geçici olarak tüm yetkileri alan yönetici.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Magister", meaning: "Usta, yönetici", history: "Roma'da belirli bir alanda yetkinlik sahibi lider, örneğin 'magister equitum'.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Aedilis", meaning: "Belediye görevlisi", history: "Roma'da pazar yerlerini ve kamu binalarını denetleyen memurlar.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Quaestor", meaning: "Maliye görevlisi", history: "Roma'da mali işlerden ve hazine yönetiminden sorumlu genç memurlar.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Pontifex", meaning: "Başrahip", history: "Roma'da dini törenleri yöneten en yüksek rahip, genellikle siyasi nüfuzu vardı.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Augur", meaning: "Kâhin", history: "Roma'da tanrıların iradesini kuş uçuşlarından yorumlayan dini görevliler.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Flamen", meaning: "Rahip", history: "Roma'da belirli tanrılara adanmış rahipler, örneğin Flamen Dialis (Jüpiter rahibi).", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Templum", meaning: "Tapınak", history: "Roma'da tanrılara adanmış kutsal yapılar, genellikle şehir merkezindeydi.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Temple_of_Vesta.jpg/320px-Temple_of_Vesta.jpg", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Ara", meaning: "Sunak", history: "Roma'da tanrılara kurban sunulan taş veya ahşap platformlar.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Deus", meaning: "Tanrı", history: "Roma'da Jüpiter gibi çok tanrılı dinin ilahi varlıkları.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Dea", meaning: "Tanrıça", history: "Roma'da Venüs veya Juno gibi kadın ilahi varlıklar.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Sacerdos", meaning: "Rahip", history: "Roma'da dini törenleri yöneten genel rahip sınıfı.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Ritualis", meaning: "Ayin", history: "Roma'da tanrılara saygı ve bağlılık göstermek için yapılan dini törenler.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Votum", meaning: "İrade, istek", history: "Roma'da tanrılara sunulan adak veya dilek, genellikle bir iyilik karşılığında.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Fatum", meaning: "Kader", history: "Roma'da insanların hayatını belirleyen ilahi irade, genellikle kaçınılmazdı.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Numen", meaning: "İlahi güç", history: "Roma'da tanrıların veya doğanın gizemli kudreti, kutsal bir enerji.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Pietas", meaning: "Dindarlık, sadakat", history: "Roma'da tanrılara, aileye ve devlete karşı görev bilinci.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Virtus", meaning: "Erdem, cesaret", history: "Roma'da erkeklerin ideal özelliği, hem askeri hem ahlaki cesareti kapsar.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Honos", meaning: "Onur", history: "Roma'da bireyin toplumdaki saygınlığı ve şerefi, genellikle bir tapınakla onurlandırılırdı.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Fides", meaning: "Güven, sadakat", history: "Roma'da sözüne sadık kalma ve güvenilirlik, tanrıça Fides ile sembolize edilirdi.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Clementia", meaning: "Merhamet", history: "Roma'da yöneticilerin affediciliğini temsil eden erdem, Caesar ile özdeşleşirdi.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Iustitia", meaning: "Adalet", history: "Roma'da hukukun temel ilkesi, tanrıça Iustitia ile sembolize edilirdi.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Libertas", meaning: "Özgürlük", history: "Roma'da vatandaşların bağımsızlığı, Cumhuriyetin temel değeriydi.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Auctoritas", meaning: "Otorite, nüfuz", history: "Roma'da liderlerin sahip olduğu karizmatik ve yasal güç, genellikle senatodan gelirdi.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Dignitas", meaning: "Saygınlık", history: "Roma'da bireyin toplumsal statüsü ve onuru, siyasi kariyer için önemliydi.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Gravitas", meaning: "Ciddiyet", history: "Roma'da liderlerin sergilemesi gereken ağırbaşlılık ve sorumluluk duygusu.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Mos", meaning: "Gelenek", history: "Roma'da atalardan gelen alışkanlıklar ve toplumsal kurallar, 'mos maiorum' olarak bilinirdi.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Annona", meaning: "Tahıl dağıtımı", history: "Roma'da halka ücretsiz tahıl dağıtımı, sosyal düzeni sağlamak için kullanılırdı.", learned: false, category: "Siyasi", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Frumentum", meaning: "Tahıl", history: "Roma'da temel gıda maddesi, genellikle eyaletlerden toplanır ve dağıtılırdı.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Panis", meaning: "Ekmek", history: "Roma'da halkın temel gıdası, 'panem et circenses' politikasıyla ücretsiz dağıtılırdı.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Vinum", meaning: "Şarap", history: "Roma'da yaygın bir içecek, genellikle suyla karıştırılarak tüketilirdi.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
    { latin: "Oleum", meaning: "Zeytinyağı", history: "Roma'da yemek, aydınlatma ve banyo için kullanılan temel bir maddeydi.", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, reviewLevel: 0 },
            { latin: "Mercator", meaning: "Tüccar", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Taberna", meaning: "Dükkân", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Forum Boarium", meaning: "Sığır pazarı", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Portus", meaning: "Liman", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Navis", meaning: "Gemi", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Roman_ship.jpg/320px-Roman_ship.jpg" },
            { latin: "Remus", meaning: "Kürek", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Ancora", meaning: "Çapa", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Mare", meaning: "Deniz", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Flumen", meaning: "Nehir", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Pons", meaning: "Köprü", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Circus", meaning: "Yarış pisti", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4e/Circus_Maximus.jpg/320px-Circus_Maximus.jpg" },
            { latin: "Amphitheatrum", meaning: "Amfitiyatro", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Colosseum.jpg/320px-Colosseum.jpg" },
            { latin: "Gladiator", meaning: "Gladyatör", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Ludi", meaning: "Oyunlar", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Currus", meaning: "Yarış arabası", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Venatio", meaning: "Vahşi hayvan avı", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Theatrum", meaning: "Tiyatro", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Actor", meaning: "Oyuncu", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Poeta", meaning: "Şair", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Scriptor", meaning: "Yazar", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Litterae", meaning: "Edebiyat, mektup", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Tabula", meaning: "Tablet, yazı tahtası", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Stilus", meaning: "Kalem", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Papyrus", meaning: "Papirüs", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Codex", meaning: "Kitap", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Schola", meaning: "Okul", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Magister", meaning: "Öğretmen", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Discipulus", meaning: "Öğrenci", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Ars", meaning: "Sanat", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Pictura", meaning: "Resim", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Statua", meaning: "Heykel", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Roman_statue.jpg/320px-Roman_statue.jpg" },
            { latin: "Mosaicum", meaning: "Mozaik", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Opus", meaning: "Eser, iş", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Fabula", meaning: "Hikâye", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Historia", meaning: "Tarih", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Annus", meaning: "Yıl", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Mensis", meaning: "Ay", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Dies", meaning: "Gün", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Hora", meaning: "Saat", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Tempus", meaning: "Zaman", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Aetas", meaning: "Çağ", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Saeculum", meaning: "Yüzyıl", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Kalendae", meaning: "Ayın ilk günü", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Idus", meaning: "Ayın ortası", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Nonae", meaning: "Ayın belirli günü", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Sol", meaning: "Güneş", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Luna", meaning: "Ay", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Stella", meaning: "Yıldız", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Caelum", meaning: "Gökyüzü", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Terra", meaning: "Toprak", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Ignis", meaning: "Ateş", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Aqua", meaning: "Su", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Ventus", meaning: "Rüzgâr", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Natura", meaning: "Doğa", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Animal", meaning: "Hayvan", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Equus", meaning: "At", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Canis", meaning: "Köpek", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Felus", meaning: "Kedi", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Leo", meaning: "Aslan", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Ursus", meaning: "Ayı", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Bos", meaning: "Sığır", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Gallina", meaning: "Tavuk", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Piscis", meaning: "Balık", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Avis", meaning: "Kuş", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Arbor", meaning: "Ağaç", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Flos", meaning: "Çiçek", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Fructus", meaning: "Meyve", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Herba", meaning: "Ot", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Campus", meaning: "Alan, ova", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Mons", meaning: "Dağ", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Collis", meaning: "Tepe", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Vallis", meaning: "Vadi", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Silva", meaning: "Orman", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Agricola", meaning: "Çiftçi", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Ager", meaning: "Tarla", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Villa Rustica", meaning: "Çiftlik evi", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Semina", meaning: "Tohum", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Messis", meaning: "Hasat", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Aratrum", meaning: "Saban", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Falx", meaning: "Orak", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Vinitor", meaning: "Bağcı", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Vitis", meaning: "Asma", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Uva", meaning: "Üzüm", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Pomum", meaning: "Elma", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Oliva", meaning: "Zeytin", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Medicus", meaning: "Doktor", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Sanitas", meaning: "Sağlık", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Morbus", meaning: "Hastalık", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Remedium", meaning: "İlaç", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Vulnus", meaning: "Yara", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Sanguis", meaning: "Kan", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Corpus", meaning: "Beden", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Caput", meaning: "Baş", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Manus", meaning: "El", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Pes", meaning: "Ayak", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Oculus", meaning: "Göz", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Auris", meaning: "Kulak", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Os", meaning: "Ağız", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Nasus", meaning: "Burun", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Dens", meaning: "Diş", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Cor", meaning: "Kalp", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Vita", meaning: "Hayat", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Mors", meaning: "Ölüm", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" },
            { latin: "Sepulcrum", meaning: "Mezar", learned: false, category: "Günlük Yaşam", wrongAttempts: 0, correctAttempts: 0, image: "" }
        ];
        const leitnerIntervals = [1, 3, 7, 14, 30];
        let currentIndex = 0;
        let correctCount = 0;
        let wrongCount = 0;
        let timerInterval;
        let currentCategory = "Hepsi";
        let quizWords = [];
        let quizIndex = 0;
        let isMultipleChoice = false;
        let isMultiplayer = false;
        let multiplayerScores = {};

        const correctSound = new Audio('https://www.soundjay.com/buttons/beep-01a.mp3');
        const wrongSound = new Audio('https://www.soundjay.com/buttons/beep-02.mp3');

        function displayWord() {
            const card = document.getElementById("card");
            card.classList.remove("visible");
            setTimeout(() => {
                document.getElementById("word").innerText = words[currentIndex].latin;
                document.getElementById("meaning").innerText = words[currentIndex].meaning;
                document.getElementById("meaning").style.display = "none";
                const history = document.getElementById("history");
                history.innerText = words[currentIndex].history || "Tarihsel bilgi yok.";
                history.style.display = "none";
                const img = document.getElementById("wordImage");
                if (words[currentIndex].image) {
                    img.src = words[currentIndex].image;
                    img.style.display = "block";
                } else {
                    img.style.display = "none";
                }
                card.classList.add("visible");
            }, 50);
        }

        function toggleMeaning() {
            const meaning = document.getElementById("meaning");
            const history = document.getElementById("history");
            const isVisible = meaning.style.display === "block";
            meaning.style.display = isVisible ? "none" : "block";
            history.style.display = isVisible ? "none" : "block";
        }

        function updateLevel() {
            const learnedCount = words.filter(word => word.learned).length;
            let level = "Çırak";
            if (learnedCount >= 10) level = "Usta";
            if (learnedCount >= 20) level = "Bilge";
            document.getElementById("level").innerText = `Seviye: ${level}`;
        }

        function nextWord() {
            currentIndex = (currentIndex + 1) % words.length;
            if (currentCategory !== "Hepsi") {
                while (words[currentIndex].category !== currentCategory) {
                    currentIndex = (currentIndex + 1) % words.length;
                }
            }
            displayWord();
        }

        function speakWord() {
            const utterance = new SpeechSynthesisUtterance(words[currentIndex].latin);
            utterance.lang = "la";
            speechSynthesis.speak(utterance);
        }

        function toggleTheme() {
            document.body.classList.toggle("dark");
            document.body.classList.toggle("light");
        }

        function searchWord() {
            const query = document.getElementById("search").value.toLowerCase();
            const found = words.find(word => word.latin.toLowerCase().includes(query));
            if (found) {
                currentIndex = words.indexOf(found);
                displayWord();
            }
        }

        let userScore = parseInt(localStorage.getItem("userScore")) || 0;
        function markAsLearned() {
            if (!words[currentIndex].learned) {
                words[currentIndex].learned = true;
                words[currentIndex].learnedDate = new Date().toISOString();
                words[currentIndex].nextReviewDate = calculateNextReviewDate(words[currentIndex].leitnerBox);
                localStorage.setItem("learnedWords", JSON.stringify(words));
                userScore += 10;
                localStorage.setItem("userScore", userScore);
                document.getElementById("score").innerText = `Puan: ${userScore}`;
                updateFirebaseScore(userScore);
                alert(`${words[currentIndex].latin} öğrenildi!`);
                updateProgress();
                updateBadges();
            } else {
                alert("Bu kelime zaten öğrenildi!");
            }
            nextWord();
        }

        function filterByCategory(category) {
            currentCategory = category;
            currentIndex = 0;
            if (category !== "Hepsi") {
                while (words[currentIndex].category !== category) {
                    currentIndex = (currentIndex + 1) % words.length;
                }
            }
            displayWord();
        }

        function setReminder() {
            document.getElementById("reminderStatus").innerText = "Hatırlatma ayarlandı! 5 saniye sonra...";
            setTimeout(() => {
                const randomWords = getRandomWords(10);
                const reminderText = randomWords.map((word, index) => `${index + 1}. ${word.latin} - ${word.meaning}`).join("\n");
                alert(`Hatırlatma:\n${reminderText}`);
                document.getElementById("reminderStatus").innerText = "";
            }, 5000);
        }

        function getRandomWords(count) {
            const unlearned = words.filter(word => !word.learned && (currentCategory === "Hepsi" || word.category === currentCategory));
            const shuffled = unlearned.length > 0 ? unlearned : words.filter(word => currentCategory === "Hepsi" || word.category === currentCategory);
            return shuffled.sort(() => 0.5 - Math.random()).slice(0, Math.min(count, shuffled.length));
        }

        function setCustomReminder() {
            const time = document.getElementById("reminderTime").value;
            if (!time) {
                alert("Lütfen bir saat seçin!");
                return;
            }
            const [hours, minutes] = time.split(":");
            const now = new Date();
            const reminder = new Date();
            reminder.setHours(hours, minutes, 0, 0);
            if (reminder < now) reminder.setDate(reminder.getDate() + 1);
            const timeDiff = reminder - now;
            document.getElementById("customReminderStatus").innerText = `Hatırlatma ${hours}:${minutes} için ayarlandı!`;
            setTimeout(() => {
                const randomWords = getRandomWords(10);
                const reminderText = randomWords.map((word, index) => `${index + 1}. ${word.latin} - ${word.meaning}`).join("\n");
                alert(`Zamanlanmış Hatırlatma:\n${reminderText}`);
                document.getElementById("customReminderStatus").innerText = "Hatırlatma yapıldı!";
            }, timeDiff);
        }

        function calculateNextReviewDate(box) {
            const now = new Date();
            const daysToAdd = leitnerIntervals[box] || 30;
            now.setDate(now.getDate() + daysToAdd);
            return now.toISOString();
        }

        function updateProgress() {
            const learnedCount = words.filter(word => word.learned).length;
            const totalCount = words.length;
            const progressPercentage = (learnedCount / totalCount) * 100;
            document.getElementById("learnedCount").innerText = learnedCount;
            document.getElementById("totalCount").innerText = totalCount;
            document.getElementById("progressFill").style.width = `${progressPercentage}%`;
        }

        function resetProgress() {
            if (confirm("İlerlemeyi sıfırlamak istediğinize emin misiniz?")) {
                words.forEach(word => {
                    word.learned = false;
                    word.wrongAttempts = 0;
                    word.correctAttempts = 0;
                    word.learnedDate = null;
                    word.nextReviewDate = null;
                    word.leitnerBox = 0;
                });
                localStorage.removeItem("learnedWords");
                userScore = 0;
                localStorage.setItem("userScore", userScore);
                document.getElementById("score").innerText = `Puan: ${userScore}`;
                updateFirebaseScore(userScore);
                updateProgress();
                updateBadges();
                alert("İlerleme sıfırlandı!");
                displayWord();
            }
        }

        function startQuiz(multipleChoice) {
            isMultipleChoice = multipleChoice;
            isMultiplayer = false;
            document.getElementById("card").style.display = "none";
            document.getElementById("quizSection").style.display = "block";
            document.getElementById("quizSection").classList.remove("correct", "wrong");
            document.querySelectorAll(".dropdown-toggle").forEach(btn => btn.disabled = true);
            document.querySelectorAll(".dropdown-menu button").forEach(btn => btn.disabled = true);
            correctCount = 0;
            wrongCount = 0;
            quizIndex = 0;
            document.getElementById("correctCount").innerText = correctCount;
            document.getElementById("wrongCount").innerText = wrongCount;
            document.getElementById("result").innerText = "";
            document.getElementById("quizTitle").innerText = multipleChoice ? "Çoktan Seçmeli Test" : "Yazılı Test";
            document.getElementById("userAnswer").style.display = multipleChoice ? "none" : "block";
            document.getElementById("checkButton").style.display = multipleChoice ? "none" : "block";
            document.getElementById("quizOptions").innerHTML = "";

            quizWords = words
                .filter(word => currentCategory === "Hepsi" || word.category === currentCategory)
                .sort((a, b) => b.wrongAttempts - a.wrongAttempts)
                .slice(0, Math.min(10, words.length));

            if (quizWords.length === 0) {
                alert("Seçilen kategoride kelime yok!");
                endQuiz();
                return;
            }

            let timeLeft = 60;
            document.getElementById("timer").innerText = timeLeft;
            timerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById("timer").innerText = timeLeft;
                if (timeLeft <= 0) {
                    endQuiz();
                }
            }, 1000);

            nextQuizWord();
        }

        function startReviewQuiz() {
            isMultipleChoice = true;
            isMultiplayer = false;
            document.getElementById("card").style.display = "none";
            document.getElementById("quizSection").style.display = "block";
            document.getElementById("quizSection").classList.remove("correct", "wrong");
            document.querySelectorAll(".dropdown-toggle").forEach(btn => btn.disabled = true);
            document.querySelectorAll(".dropdown-menu button").forEach(btn => btn.disabled = true);
            correctCount = 0;
            wrongCount = 0;
            quizIndex = 0;
            document.getElementById("correctCount").innerText = correctCount;
            document.getElementById("wrongCount").innerText = wrongCount;
            document.getElementById("result").innerText = "";
            document.getElementById("quizTitle").innerText = "Tekrar Testi";
            document.getElementById("userAnswer").style.display = "none";
            document.getElementById("checkButton").style.display = "none";
            document.getElementById("quizOptions").innerHTML = "";

            quizWords = getReviewWords();
            if (quizWords.length === 0) {
                alert("Bugün tekrar edilecek kelime yok!");
                endQuiz();
                return;
            }

            let timeLeft = 60;
            document.getElementById("timer").innerText = timeLeft;
            timerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById("timer").innerText = timeLeft;
                if (timeLeft <= 0) {
                    endQuiz();
                }
            }, 1000);

            nextQuizWord();
        }

        function startMultiplayerQuiz() {
            isMultipleChoice = true;
            isMultiplayer = true;
            document.getElementById("card").style.display = "none";
            document.getElementById("quizSection").style.display = "block";
            document.getElementById("quizSection").classList.remove("correct", "wrong");
            document.querySelectorAll(".dropdown-toggle").forEach(btn => btn.disabled = true);
            document.querySelectorAll(".dropdown-menu button").forEach(btn => btn.disabled = true);
            correctCount = 0;
            wrongCount = 0;
            quizIndex = 0;
            multiplayerScores = {};
            document.getElementById("correctCount").innerText = correctCount;
            document.getElementById("wrongCount").innerText = wrongCount;
            document.getElementById("result").innerText = "";
            document.getElementById("quizTitle").innerText = "Çok Oyunculu Test";
            document.getElementById("userAnswer").style.display = "none";
            document.getElementById("checkButton").style.display = "none";
            document.getElementById("quizOptions").innerHTML = "";

            quizWords = words
                .filter(word => currentCategory === "Hepsi" || word.category === currentCategory)
                .sort(() => 0.5 - Math.random())
                .slice(0, Math.min(10, words.length));

            if (quizWords.length === 0) {
                alert("Seçilen kategoride kelime yok!");
                endQuiz();
                return;
            }

            let timeLeft = 60;
            document.getElementById("timer").innerText = timeLeft;
            timerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById("timer").innerText = timeLeft;
                if (timeLeft <= 0) {
                    endQuiz();
                }
            }, 1000);

            if (db) {
                db.collection("multiplayerSessions").doc("current").set({
                    quizWords: quizWords.map(w => w.latin),
                    startTime: firebase.firestore.FieldValue.serverTimestamp(),
                    active: true
                });
            }

            nextQuizWord();
        }

        function getReviewWords() {
            const today = new Date().toISOString().split("T")[0];
            return words.filter(word => word.learned && word.nextReviewDate && new Date(word.nextReviewDate).toISOString().split("T")[0] <= today);
        }

        function nextQuizWord() {
            if (quizIndex >= quizWords.length) {
                endQuiz();
                return;
            }
            document.getElementById("quizWord").innerText = quizWords[quizIndex].latin;
            document.getElementById("userAnswer").value = "";
            document.getElementById("result").innerText = "";
            document.getElementById("quizOptions").innerHTML = "";

            if (isMultipleChoice) {
                const options = generateOptions(quizWords[quizIndex].meaning);
                const quizOptions = document.getElementById("quizOptions");
                options.forEach(option => {
                    const btn = document.createElement("button");
                    btn.innerText = option;
                    btn.onclick = () => checkMultipleChoice(option, quizWords[quizIndex]);
                    quizOptions.appendChild(btn);
                });
            }
        }

        function generateOptions(correctAnswer) {
            const options = [correctAnswer];
            const otherWords = words.filter(w => w.meaning !== correctAnswer);
            while (options.length < 4 && otherWords.length > 0) {
                const randomIndex = Math.floor(Math.random() * otherWords.length);
                const randomMeaning = otherWords[randomIndex].meaning;
                if (!options.includes(randomMeaning)) {
                    options.push(randomMeaning);
                    otherWords.splice(randomIndex, 1);
                }
            }
            return options.sort(() => 0.5 - Math.random());
        }

        function checkMultipleChoice(selected, currentWord) {
            const correctAnswer = currentWord.meaning;
            const wordIndex = words.indexOf(currentWord);
            const quizSection = document.getElementById("quizSection");
            if (selected === correctAnswer) {
                document.getElementById("result").innerText = "Doğru!";
                correctCount++;
                words[wordIndex].correctAttempts++;
                correctSound.play();
                if (!isMultiplayer && !words[wordIndex].learned) {
                    words[wordIndex].learned = true;
                    words[wordIndex].learnedDate = new Date().toISOString();
                    words[wordIndex].leitnerBox = 0;
                }
                if (!isMultiplayer) {
                    words[wordIndex].leitnerBox = Math.min(words[wordIndex].leitnerBox + 1, leitnerIntervals.length - 1);
                    words[wordIndex].nextReviewDate = calculateNextReviewDate(words[wordIndex].leitnerBox);
                }
                quizSection.classList.remove("wrong");
                quizSection.classList.add("correct");
                if (isMultiplayer) {
                    userScore += 10;
                    updateMultiplayerScore(userScore);
                }
            } else {
                document.getElementById("result").innerText = `Yanlış! Doğru cevap: ${correctAnswer}`;
                wrongCount++;
                words[wordIndex].wrongAttempts++;
                wrongSound.play();
                if (!isMultiplayer && words[wordIndex].learned) {
                    words[wordIndex].leitnerBox = Math.max(words[wordIndex].leitnerBox - 1, 0);
                    words[wordIndex].nextReviewDate = calculateNextReviewDate(words[wordIndex].leitnerBox);
                }
                quizSection.classList.remove("correct");
                quizSection.classList.add("wrong");
            }
            document.getElementById("correctCount").innerText = correctCount;
            document.getElementById("wrongCount").innerText = wrongCount;
            if (!isMultiplayer) {
                localStorage.setItem("learnedWords", JSON.stringify(words));
                updateProgress();
                updateBadges();
            }
            quizIndex++;
            setTimeout(nextQuizWord, 500);
        }

        function checkAnswer() {
            const userAnswer = document.getElementById("userAnswer").value.trim().toLowerCase();
            const correctAnswer = quizWords[quizIndex].meaning.toLowerCase();
            const wordIndex = words.indexOf(quizWords[quizIndex]);
            const quizSection = document.getElementById("quizSection");
            if (userAnswer === correctAnswer) {
                document.getElementById("result").innerText = "Doğru!";
                correctCount++;
                words[wordIndex].correctAttempts++;
                correctSound.play();
                if (!words[wordIndex].learned) {
                    words[wordIndex].learned = true;
                    words[wordIndex].learnedDate = new Date().toISOString();
                    words[wordIndex].leitnerBox = 0;
                    updateProgress();
                    updateBadges();
                } else {
                    words[wordIndex].leitnerBox = Math.min(words[wordIndex].leitnerBox + 1, leitnerIntervals.length - 1);
                }
                words[wordIndex].nextReviewDate = calculateNextReviewDate(words[wordIndex].leitnerBox);
                quizSection.classList.remove("wrong");
                quizSection.classList.add("correct");
            } else {
                document.getElementById("result").innerText = `Yanlış! Doğru cevap: ${correctAnswer}`;
                wrongCount++;
                words[wordIndex].wrongAttempts++;
                wrongSound.play();
                if (words[wordIndex].learned) {
                    words[wordIndex].leitnerBox = Math.max(words[wordIndex].leitnerBox - 1, 0);
                    words[wordIndex].nextReviewDate = calculateNextReviewDate(words[wordIndex].leitnerBox);
                }
                quizSection.classList.remove("correct");
                quizSection.classList.add("wrong");
            }
            document.getElementById("correctCount").innerText = correctCount;
            document.getElementById("wrongCount").innerText = wrongCount;
            localStorage.setItem("learnedWords", JSON.stringify(words));
            quizIndex++;
            setTimeout(nextQuizWord, 500);
        }

        function endQuiz() {
            clearInterval(timerInterval);
            document.getElementById("card").style.display = "block";
            document.getElementById("quizSection").style.display = "none";
            document.getElementById("quizSection").classList.remove("correct", "wrong");
            document.querySelectorAll(".dropdown-toggle").forEach(btn => btn.disabled = false);
            document.querySelectorAll(".dropdown-menu button").forEach(btn => btn.disabled = false);
            if (isMultiplayer) {
                alert(`Çok Oyunculu Test bitti!\nDoğru: ${correctCount}\nYanlış: ${wrongCount}\nPuanınız: ${userScore}`);
                showLeaderboard();
            } else {
                alert(`Test bitti!\nDoğru: ${correctCount}\nYanlış: ${wrongCount}`);
            }
            displayWord();
            if (isMultiplayer && db) {
                db.collection("multiplayerSessions").doc("current").update({ active: false });
            }
            isMultiplayer = false;
        }

        function updateMultiplayerScore(score) {
            const userName = localStorage.getItem("userName") || "Misafir";
            multiplayerScores[userName] = score;
            if (db) {
                db.collection("users").where("name", "==", userName).get()
                    .then(querySnapshot => {
                        querySnapshot.forEach(doc => {
                            doc.ref.update({ score: score });
                        });
                    });
            }
            localStorage.setItem("userScore", score);
            document.getElementById("score").innerText = `Puan: ${score}`;
        }

        function updateFirebaseScore(score) {
            const userName = localStorage.getItem("userName") || "Misafir";
            if (db) {
                db.collection("users").where("name", "==", userName).get()
                    .then(querySnapshot => {
                        querySnapshot.forEach(doc => {
                            doc.ref.update({ score: score });
                        });
                    });
            }
        }

        function showLeaderboard() {
            document.getElementById("leaderboardSection").style.display = "block";
            const leaderboardList = document.getElementById("leaderboardList");
            leaderboardList.innerHTML = "";
            if (db) {
                db.collection("users").orderBy("score", "desc").limit(10).get()
                    .then(querySnapshot => {
                        querySnapshot.forEach(doc => {
                            const data = doc.data();
                            const li = document.createElement("li");
                            li.innerText = `${data.name}: ${data.score}`;
                            leaderboardList.appendChild(li);
                        });
                    })
                    .catch(error => console.error("Liderlik tablosu yüklenemedi:", error));
            } else {
                const localScores = multiplayerScores;
                const sortedScores = Object.entries(localScores).sort((a, b) => b[1] - a[1]).slice(0, 10);
                sortedScores.forEach(([name, score]) => {
                    const li = document.createElement("li");
                    li.innerText = `${name}: ${score}`;
                    leaderboardList.appendChild(li);
                });
            }
        }

        function hideLeaderboard() {
            document.getElementById("leaderboardSection").style.display = "none";
        }

        function showReviewSection() {
            const reviewWords = getReviewWords();
            const reviewList = document.getElementById("reviewList");
            reviewList.innerHTML = "";
            if (reviewWords.length === 0) {
                reviewList.innerText = "Bugün tekrar edilecek kelime yok.";
            } else {
                reviewWords.forEach((word, index) => {
                    const btn = document.createElement("button");
                    btn.innerText = `${word.latin} (Kutu ${word.leitnerBox})`;
                    btn.onclick = () => {
                        currentIndex = words.indexOf(word);
                        displayWord();
                        hideReviewSection();
                    };
                    reviewList.appendChild(btn);
                });
            }
            document.getElementById("reviewSection").style.display = "block";
        }

        function hideReviewSection() {
            document.getElementById("reviewSection").style.display = "none";
        }

        function showStats() {
            document.getElementById("stats").style.display = "block";
            const mostWrongWord = words.reduce((max, word) => word.wrongAttempts > max.wrongAttempts ? word : max, words[0]);
            document.getElementById("mostWrong").innerText = mostWrongWord ? `${mostWrongWord.latin} (${mostWrongWord.wrongAttempts} hata)` : "Veri yok";
        }

        function closeStats() {
            document.getElementById("stats").style.display = "none";
        }

        function showDetailedStats() {
            const learned = words.filter(w => w.learned).length;
            const accuracy = (correctCount / (correctCount + wrongCount) * 100).toFixed(2) || 0;
            const reviewPending = getReviewWords().length;
            alert(`Detaylı İstatistikler:\nÖğrenilen: ${learned}\nDoğru: ${correctCount}\nYanlış: ${wrongCount}\nBaşarı: %${accuracy}\nBugün Tekrar Edilecek: ${reviewPending}`);
        }

        function addNewWord() {
            const latin = prompt("Latince kelimeyi girin:");
            const meaning = prompt("Anlamını girin:");
            const category = prompt("Kategoriyi girin (Siyasi, Askeri, Günlük Yaşam):");
            if (latin && meaning && category) {
                words.push({ latin, meaning, learned: false, category, wrongAttempts: 0, correctAttempts: 0, image: "", learnedDate: null, nextReviewDate: null, leitnerBox: 0 });
                localStorage.setItem("learnedWords", JSON.stringify(words));
                updateProgress();
                alert("Kelime eklendi!");
            }
        }

        function updateBadges() {
            const learnedCount = words.filter(word => word.learned).length;
            let badges = [];
            if (learnedCount >= 50) badges.push("Roma Çaylağı");
            if (learnedCount >= 100) badges.push("Legatus");
            if (learnedCount >= 200) badges.push("İmparator");
            document.getElementById("badgeList").innerText = badges.length > 0 ? badges.join(", ") : "Henüz rozet yok";
        }

        function calculateDifficulty() {
            words.forEach(word => {
                const totalAttempts = word.correctAttempts + word.wrongAttempts;
                word.difficulty = totalAttempts > 0 ? word.wrongAttempts / totalAttempts : 0;
            });
            const hardest = words.sort((a, b) => b.difficulty - a.difficulty)[0];
            alert(`En Zor Kelime: ${hardest.latin} (Zorluk: ${hardest.difficulty.toFixed(2)})`);
        }

        function setDailyGoal() {
            const goal = parseInt(prompt("Günlük kelime hedefini girin:"));
            if (goal) {
                localStorage.setItem("dailyGoal", goal);
                alert(`Günlük hedef: ${goal} kelime`);
            }
        }

        function checkDailyGoal() {
            const goal = parseInt(localStorage.getItem("dailyGoal")) || 0;
            const today = new Date().toDateString();
            const learnedToday = words.filter(w => w.learned && w.learnedDate && new Date(w.learnedDate).toDateString() === today).length;
            alert(`Hedef: ${goal}\nBugün Öğrenilen: ${learnedToday}`);
        }

        function toggleDropdown(id) {
            const menu = document.getElementById(id);
            const isVisible = menu.style.display === "block";
            document.querySelectorAll(".dropdown-menu").forEach(m => m.style.display = "none");
            if (!isVisible) {
                menu.style.display = "block";
            }
        }

        document.addEventListener("click", function(event) {
            if (!event.target.closest(".dropdown")) {
                document.querySelectorAll(".dropdown-menu").forEach(m => m.style.display = "none");
            }
        });

        function createAnalogClock() {
            const clock = document.getElementById("analogClock");
            clock.innerHTML = `
                <div class="clock-face">
                    <div class="hour-hand"></div>
                    <div class="minute-hand"></div>
                    <div class="second-hand"></div>
                    <div class="clock-center"></div>
                </div>
            `;
            updateClock();
            setInterval(updateClock, 1000);
        }

        function updateClock() {
            const now = new Date();
            const hours = now.getHours() % 12;
            const minutes = now.getMinutes();
            const seconds = now.getSeconds();

            const hourDeg = (hours * 30) + (minutes * 0.5);
            const minuteDeg = minutes * 6;
            const secondDeg = seconds * 6;

            const hourHand = document.querySelector(".hour-hand");
            const minuteHand = document.querySelector(".minute-hand");
            const secondHand = document.querySelector(".second-hand");

            hourHand.style.transform = `translateX(-50%) rotate(${hourDeg}deg)`;
            minuteHand.style.transform = `translateX(-50%) rotate(${minuteDeg}deg)`;
            secondHand.style.transform = `translateX(-50%) rotate(${secondDeg}deg)`;
        }

        function displayUserName() {
            const userName = localStorage.getItem('userName') || 'Misafir';
            document.getElementById('userName').innerText = `Hoş geldiniz, ${userName}!`;
        }

        function sendChatMessage() {
            const messageInput = document.getElementById('chatInput');
            const message = messageInput.value.trim();
            const userName = localStorage.getItem('userName') || 'Misafir';
            if (message) {
                const timestamp = new Date().toLocaleTimeString();
                const chatMessage = `${timestamp} - ${userName}: ${message}`;

                if (db) {
                    db.collection('chatMessages').add({
                        user: userName,
                        message: message,
                        timestamp: firebase.firestore.FieldValue.serverTimestamp()
                    })
                    .then(() => {
                        messageInput.value = '';
                        loadChatMessages();
                    })
                    .catch(error => console.error('Mesaj gönderme hatası:', error));
                } else {
                    const messages = JSON.parse(localStorage.getItem('chatMessages')) || [];
                    messages.push(chatMessage);
                    localStorage.setItem('chatMessages', JSON.stringify(messages));
                    displayChatMessage(chatMessage);
                    messageInput.value = '';
                }
            }
        }

        function displayChatMessage(message) {
            const chatMessages = document.getElementById('chatMessages');
            const messageElement = document.createElement('p');
            messageElement.innerText = message;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function loadChatMessages() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '';
            if (db) {
                db.collection('chatMessages')
                  .orderBy('timestamp', 'asc')
                  .onSnapshot(snapshot => {
                      chatMessages.innerHTML = '';
                      snapshot.forEach(doc => {
                          const data = doc.data();
                          const timestamp = data.timestamp ? new Date(data.timestamp.toDate()).toLocaleTimeString() : 'Bilinmeyen Zaman';
                          const chatMessage = `${timestamp} - ${data.user}: ${data.message}`;
                          displayChatMessage(chatMessage);
                      });
                  }, error => console.error('Mesaj yükleme hatası:', error));
            } else {
                const messages = JSON.parse(localStorage.getItem('chatMessages')) || [];
                messages.forEach(message => displayChatMessage(message));
            }
        }

        function exportWrongWordsToPDF() {
            const wrongWords = words.filter(word => word.wrongAttempts > 0)
                                   .sort((a, b) => b.wrongAttempts - a.wrongAttempts);
            if (wrongWords.length === 0) {
                alert("Henüz yanlış yapılan kelime yok!");
                return;
            }

            const doc = new jsPDF();
            doc.setFontSize(16);
            doc.text("Yanlış Yapılan Kelimeler", 10, 10);
            doc.setFontSize(12);
            let y = 20;
            wrongWords.forEach((word, index) => {
                const text = `${index + 1}. ${word.latin} - ${word.meaning} (Yanlış: ${word.wrongAttempts})`;
                doc.text(text, 10, y);
                y += 10;
                if (y > 280) {
                    doc.addPage();
                    y = 10;
                }
            });
            doc.save("Yanlis_Kelimeler.pdf");
        }

        function exportWrongWordsToWord() {
            const wrongWords = words.filter(word => word.wrongAttempts > 0)
                                   .sort((a, b) => b.wrongAttempts - a.wrongAttempts);
            if (wrongWords.length === 0) {
                alert("Henüz yanlış yapılan kelime yok!");
                return;
            }

            const content = [
                "Yanlış Yapılan Kelimeler\n\n",
                ...wrongWords.map((word, index) => `${index + 1}. ${word.latin} - ${word.meaning} (Yanlış: ${word.wrongAttempts})\n`)
            ].join("");

            const blob = new Blob([content], { type: "application/msword" });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = "Yanlis_Kelimeler.doc";
            link.click();
        }
    </script>
</body>
</html>
